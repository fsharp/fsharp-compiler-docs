<!DOCTYPE html>
<html lang="en" data-root="https://fsharp.github.io/fsharp-compiler-docs/">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="F# Software Foundation; Microsoft; F# Contributors" name="author">
    <!-- Opengraph properties (https://ogp.me/) -->
    <meta property="og:site_name" content="F# Compiler Guide">
    <meta property="og:title" content="Tutorial: Expressions" />
    <meta property="og:url" content="https://fsharp.github.io/fsharp-compiler-docs/fcs/untypedtree.html">
    <meta property="og:type" content="website" />
    <!-- Twitter cards (https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="https://fsharp.github.io/fsharp-compiler-docs/">
    <meta name="twitter:title" content="Tutorial: Expressions">
    
    <title>Tutorial: Expressions | F# Compiler Guide</title>
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://fsharp.github.io/fsharp-compiler-docs/img/favicon.ico" rel="icon" sizes="32x32" type="image/png"/>
    <script type="application/javascript" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-theme-set-dark.js"></script>
    <script type="application/javascript" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-details-set-expanded.js"></script>
    <link href="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-default.css" rel="stylesheet" type="text/css"/>
    <link href="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-theme.css" rel="stylesheet" type="text/css"/>
    
    
</head>
<body class="content">
<header>
    <div class="start">
        <div id="menu-toggle">
            <iconify-icon class="icon closed" height="22" icon="eva:menu-fill" width="22"></iconify-icon>
            <iconify-icon class="icon open" height="22" icon="mi:close" width="22"></iconify-icon>
            <input type="checkbox" name="mobile-menu" />
            <ul class="menu">
                <li class="nav-header">Links</li>
                <li class="license-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/dotnet/fsharp/blob/main/License.txt">License</a>
                </li>
                <li class="release-notes-menu-item builtin-menu-item nav-item"><a class="nav-link"
                                        href="https://github.com/dotnet/fsharp/blob/main/release-notes.md">Release
                    Notes</a></li>
                <li class="repository-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/dotnet/fsharp/">Source
                    Repository</a></li>
                <li class="nav-header ">
  Compiler Internals
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/reusing-typechecking-results.html">
    Reusing typechecking results
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/overview.html">
    Overview
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/coding-standards.html">
    Coding standards
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/diagnostics.html">
    Diagnostics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/representations.html">
    Representations
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/debug-emit.html">
    Debug emit
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/names.html">
    Display names, logical names and compiled names
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fsi-emit.html">
    F# Interactive Emit
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/optimizations.html">
    Optimizations
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/large-inputs-and-stack-overflows.html">
    Large inputs
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/memory-usage.html">
    Memory usage
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/compiler-startup-performance.html">
    Startup Performance
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/changing-the-ast.html">
    Changing the AST
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/running-documentation-locally.html">
    Running the documentation locally
  </a>
</li>             
<li class="nav-header ">
  Language Service Internals
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/tooling-features.html">
    Overview
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/project-builds.html">
    Project builds
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/caches.html">
    FSharpChecker caches
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/react.html">
    Incrementality
  </a>
</li>             
<li class="nav-header active">
  FSharp.Compiler.Service
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/tokenizer.html">
    Tutorial: Tokenizing
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/untypedtree.html">
    Tutorial: Expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/untypedtree-apis.html">
    Tutorial: AST APIs
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/symbols.html">
    Tutorial: Symbols
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/editor.html">
    Tutorial: Editor services
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/typedtree.html">
    Tutorial: Expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/project.html">
    Tutorial: Project analysis
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/interactive.html">
    Tutorial: Hosted execution
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/compiler.html">
    Tutorial: Hosting the compiler
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/corelib.html">
    Notes on FSharp.Core
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/filesystem.html">
    IFileSystem
  </a>
</li>             
<li class="nav-header ">
  FSharp.Core
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fsharp-core-notes.html">
    Guidance
  </a>
</li>             
<li class="nav-header ">
  Release Notes
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/About.html">
    About
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/Language.html">
    F# Language
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/FSharp.Core.html">
    FSharp.Core
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/FSharp.Compiler.Service.html">
    FSharp.Compiler.Service
  </a>
</li>             
<li class="nav-header ">
  Other
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/perf-discussions-archive.html">
    Comparisons

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/optimizations-equality.html">
    Compiling Equality

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/lsp.html">
    F# LSP

  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
        <a href="https://fsharp.github.io/fsharp-compiler-docs/">
            <img alt="Header menu logo" src="https://fsharp.github.io/fsharp-compiler-docs/img/logo.png">
            <strong>F# Compiler Guide</strong>
        </a>
    </div>
    <div class="end">
        <a href="https://github.com/dotnet/fsharp/" target="_blank">
            <iconify-icon icon="uil:github" width="26" height="26"></iconify-icon>
        </a>
        <iconify-icon id="search-btn" icon="carbon:search" class="search" width="24" height="24"></iconify-icon>
        <fsdocs-theme-toggle></fsdocs-theme-toggle>
    </div>
</header>
<aside id="fsdocs-main-menu">
    <ul class="menu">
        <li class="nav-header">Links</li>
        <li class="license-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/dotnet/fsharp/blob/main/License.txt">License</a>
        </li>
        <li class="release-notes-menu-item builtin-menu-item nav-item"><a class="nav-link"
                                href="https://github.com/dotnet/fsharp/blob/main/release-notes.md">Release
            Notes</a></li>
        <li class="repository-menu-item builtin-menu-item nav-item"><a class="nav-link" href="https://github.com/dotnet/fsharp/">Source
            Repository</a></li>
        <li class="nav-header ">
  Compiler Internals
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/reusing-typechecking-results.html">
    Reusing typechecking results
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/overview.html">
    Overview
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/coding-standards.html">
    Coding standards
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/diagnostics.html">
    Diagnostics
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/representations.html">
    Representations
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/debug-emit.html">
    Debug emit
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/names.html">
    Display names, logical names and compiled names
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fsi-emit.html">
    F# Interactive Emit
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/optimizations.html">
    Optimizations
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/large-inputs-and-stack-overflows.html">
    Large inputs
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/memory-usage.html">
    Memory usage
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/compiler-startup-performance.html">
    Startup Performance
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/changing-the-ast.html">
    Changing the AST
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/running-documentation-locally.html">
    Running the documentation locally
  </a>
</li>             
<li class="nav-header ">
  Language Service Internals
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/tooling-features.html">
    Overview
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/project-builds.html">
    Project builds
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/caches.html">
    FSharpChecker caches
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/react.html">
    Incrementality
  </a>
</li>             
<li class="nav-header active">
  FSharp.Compiler.Service
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/tokenizer.html">
    Tutorial: Tokenizing
  </a>
</li>             
<li class="nav-item active">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/untypedtree.html">
    Tutorial: Expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/untypedtree-apis.html">
    Tutorial: AST APIs
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/symbols.html">
    Tutorial: Symbols
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/editor.html">
    Tutorial: Editor services
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/typedtree.html">
    Tutorial: Expressions
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/project.html">
    Tutorial: Project analysis
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/interactive.html">
    Tutorial: Hosted execution
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/compiler.html">
    Tutorial: Hosting the compiler
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/corelib.html">
    Notes on FSharp.Core
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fcs/filesystem.html">
    IFileSystem
  </a>
</li>             
<li class="nav-header ">
  FSharp.Core
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/fsharp-core-notes.html">
    Guidance
  </a>
</li>             
<li class="nav-header ">
  Release Notes
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/About.html">
    About
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/Language.html">
    F# Language
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/FSharp.Core.html">
    FSharp.Core
  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/release-notes/FSharp.Compiler.Service.html">
    FSharp.Compiler.Service
  </a>
</li>             
<li class="nav-header ">
  Other
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/perf-discussions-archive.html">
    Comparisons

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/optimizations-equality.html">
    Compiling Equality

  </a>
</li>             
<li class="nav-item ">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/lsp.html">
    F# LSP

  </a>
</li>
        <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://fsharp.github.io/fsharp-compiler-docs/reference/index.html">
    All Namespaces
  </a>
</li>
    </ul>
</aside>
<main>
    <div id="content">
        
<h1><a name="Compiler-Services-Processing-SyntaxTree" class="anchor" href="#Compiler-Services-Processing-SyntaxTree">Compiler Services: Processing SyntaxTree</a></h1>
<p>This tutorial demonstrates how to get the SyntaxTree (AST)
for F# code and how to walk over the tree. This can be used for creating tools
such as code formatter, basic refactoring or code navigation tools. The untyped
syntax tree contains information about the code structure, but does not contain
types and there are some ambiguities that are resolved only later by the type
checker. You can also combine the SyntaxTree information with the API available
from <a href="editor.html">editor services</a>.</p>
<blockquote>
<p><strong>NOTE:</strong> The FSharp.Compiler.Service API is subject to change when later versions of the nuget package are published</p>
</blockquote>
<h2><a name="Getting-the-SyntaxTree" class="anchor" href="#Getting-the-SyntaxTree">Getting the SyntaxTree</a></h2>
<p>To access the untyped AST, you need to create an instance of <code>FSharpChecker</code>.
This type represents a context for type checking and parsing and corresponds either
to a stand-alone F# script file (e.g. opened in Visual Studio) or to a loaded project
file with multiple files. Once you have an instance of <code>FSharpChecker</code>, you can
use it to perform "untyped parse" which is the first step of type-checking. The
second phase is "typed parse" and is used by <a href="editor.html">editor services</a>.</p>
<p>To use the interactive checker, reference <code>FSharp.Compiler.Service.dll</code> and open the
<code>SourceCodeServices</code> namespace:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="pp">#r</span> <span class="s">&quot;FSharp.Compiler.Service.dll&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">System</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="id">Compiler</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="id">CodeAnalysis</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="id">Compiler</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs5', 7)" onmouseover="showTip(event, 'fs5', 7)" class="id">Text</span>
</code></pre>
<h3><a name="Performing-untyped-parse" class="anchor" href="#Performing-untyped-parse">Performing untyped parse</a></h3>
<p>The untyped parse operation is very fast (compared to type checking, which can
take notable amount of time) and so we can perform it synchronously. First, we
need to create <code>FSharpChecker</code> - the constructor takes an argument that
can be used to notify the checker about file changes (which we ignore).</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Create an interactive checker instance </span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 8)" onmouseover="showTip(event, 'fs6', 8)" class="id">checker</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 9)" onmouseover="showTip(event, 'fs7', 9)" class="rt">FSharpChecker</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="id">Create</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>
<p>To get the AST, we define a function that takes file name and the source code
(the file is only used for location information and does not have to exist).
We first need to get "interactive checker options" which represents the context.
For simple tasks, you can use <code>GetProjectOptionsFromScriptRoot</code> which infers
the context for a script file. Then we use the <code>ParseFile</code> method and
return the <code>ParseTree</code> property:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Get untyped tree for a specified input</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs9', 11)" onmouseover="showTip(event, 'fs9', 11)" class="fn">getUntypedTree</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 12)" onmouseover="showTip(event, 'fs10', 12)" class="fn">file</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="fn">input</span><span class="pn">)</span> <span class="o">=</span> 
  <span class="c">// Get compiler options for the &#39;project&#39; implied by a single script file</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs12', 14)" onmouseover="showTip(event, 'fs12', 14)" class="fn">projOptions</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs13', 15)" onmouseover="showTip(event, 'fs13', 15)" class="fn">diagnostics</span> <span class="o">=</span> 
      <span onmouseout="hideTip(event, 'fs6', 16)" onmouseover="showTip(event, 'fs6', 16)" class="id">checker</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs14', 17)" onmouseover="showTip(event, 'fs14', 17)" class="id">GetProjectOptionsFromScript</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 18)" onmouseover="showTip(event, 'fs10', 18)" class="fn">file</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs11', 19)" onmouseover="showTip(event, 'fs11', 19)" class="fn">input</span><span class="pn">,</span> <span class="fn">assumeDotNetFramework</span><span class="o">=</span><span class="k">false</span><span class="pn">)</span>
      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs15', 20)" onmouseover="showTip(event, 'fs15', 20)" class="rt">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 21)" onmouseover="showTip(event, 'fs16', 21)" class="id">RunSynchronously</span>

  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs17', 22)" onmouseover="showTip(event, 'fs17', 22)" class="fn">parsingOptions</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs18', 23)" onmouseover="showTip(event, 'fs18', 23)" class="id">_errors</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs6', 24)" onmouseover="showTip(event, 'fs6', 24)" class="id">checker</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 25)" onmouseover="showTip(event, 'fs19', 25)" class="id">GetParsingOptionsFromProjectOptions</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs12', 26)" onmouseover="showTip(event, 'fs12', 26)" class="fn">projOptions</span><span class="pn">)</span>

  <span class="c">// Run the first phase (untyped parsing) of the compiler</span>
  <span class="k">let</span> <span onmouseout="hideTip(event, 'fs20', 27)" onmouseover="showTip(event, 'fs20', 27)" class="fn">parseFileResults</span> <span class="o">=</span> 
      <span onmouseout="hideTip(event, 'fs6', 28)" onmouseover="showTip(event, 'fs6', 28)" class="id">checker</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 29)" onmouseover="showTip(event, 'fs21', 29)" class="id">ParseFile</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 30)" onmouseover="showTip(event, 'fs10', 30)" class="fn">file</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs11', 31)" onmouseover="showTip(event, 'fs11', 31)" class="fn">input</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs17', 32)" onmouseover="showTip(event, 'fs17', 32)" class="fn">parsingOptions</span><span class="pn">)</span> 
      <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs15', 33)" onmouseover="showTip(event, 'fs15', 33)" class="rt">Async</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 34)" onmouseover="showTip(event, 'fs16', 34)" class="id">RunSynchronously</span>

  <span onmouseout="hideTip(event, 'fs20', 35)" onmouseover="showTip(event, 'fs20', 35)" class="fn">parseFileResults</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs22', 36)" onmouseover="showTip(event, 'fs22', 36)" class="id">ParseTree</span>
  
</code></pre>
<h2><a name="Walking-over-the-AST" class="anchor" href="#Walking-over-the-AST">Walking over the AST</a></h2>
<p>The abstract syntax tree is defined as a number of discriminated unions that represent
different syntactical elements (such as expressions, patterns, declarations etc.). The best
way to understand the AST is to look at the definitions in
<a href="https://github.com/dotnet/fsharp/blob/main/src/Compiler/SyntaxTree/SyntaxTree.fsi"><code>SyntaxTree.fsi</code></a>
in the source  code.</p>
<p>The relevant parts are in the following namespace:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 37)" onmouseover="showTip(event, 'fs2', 37)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 38)" onmouseover="showTip(event, 'fs3', 38)" class="id">Compiler</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs23', 39)" onmouseover="showTip(event, 'fs23', 39)" class="id">Syntax</span>
</code></pre>
<p>When processing the AST, you will typically write a number of mutually recursive functions
that pattern match on the different syntactical elements. There is a number of elements
that need to be supported - the top-level element is module or namespace declaration,
containing declarations inside a module (let bindings, types etc.). A let declaration inside
a module then contains expressions, which can contain patterns.</p>
<h3><a name="Walking-over-patterns-and-expressions" class="anchor" href="#Walking-over-patterns-and-expressions">Walking over patterns and expressions</a></h3>
<p>We start by looking at functions that walk over expressions and patterns - as we walk,
we print information about the visited elements. For patterns, the input is of type
<code>SynPat</code> and has a number of cases including <code>Wild</code> (for <code>_</code> pattern), <code>Named</code> (for
<code>&lt;pat&gt; as name</code>) and <code>LongIdent</code> (for a <code>Foo.Bar</code> name). Note that the parsed pattern
is occasionally more complex than what is in the source code (in particular, <code>Named</code> is
used more often):</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Walk over a pattern - this is for example used in </span>
<span class="c">/// let &lt;pat&gt; = &lt;expr&gt; or in the &#39;match&#39; expression</span>
<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs24', 40)" onmouseover="showTip(event, 'fs24', 40)" class="fn">visitPattern</span> <span class="o">=</span> <span class="k">function</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs25', 41)" onmouseover="showTip(event, 'fs25', 41)" class="rt">SynPat</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs26', 42)" onmouseover="showTip(event, 'fs26', 42)" class="id">Wild</span> <span class="id">_</span> <span class="k">-&gt;</span> 
      <span onmouseout="hideTip(event, 'fs27', 43)" onmouseover="showTip(event, 'fs27', 43)" class="fn">printfn</span> <span class="s">&quot;  .. underscore pattern&quot;</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs25', 44)" onmouseover="showTip(event, 'fs25', 44)" class="rt">SynPat</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs28', 45)" onmouseover="showTip(event, 'fs28', 45)" class="id">Named</span><span class="pn">(</span><span class="prop">ident</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs29', 46)" onmouseover="showTip(event, 'fs29', 46)" class="uc">SynIdent</span><span class="pn">(</span><span class="prop">ident</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs30', 47)" onmouseover="showTip(event, 'fs30', 47)" class="fn">name</span><span class="pn">)</span><span class="pn">)</span> <span class="k">-&gt;</span>
      <span onmouseout="hideTip(event, 'fs27', 48)" onmouseover="showTip(event, 'fs27', 48)" class="fn">printfn</span> <span class="s">&quot;  .. named as &#39;</span><span class="pf">%s</span><span class="s">&#39;&quot;</span> <span onmouseout="hideTip(event, 'fs30', 49)" onmouseover="showTip(event, 'fs30', 49)" class="fn">name</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 50)" onmouseover="showTip(event, 'fs31', 50)" class="id">idText</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs25', 51)" onmouseover="showTip(event, 'fs25', 51)" class="rt">SynPat</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 52)" onmouseover="showTip(event, 'fs32', 52)" class="id">LongIdent</span><span class="pn">(</span><span class="prop">longDotId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs33', 53)" onmouseover="showTip(event, 'fs33', 53)" class="uc">SynLongIdent</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs34', 54)" onmouseover="showTip(event, 'fs34', 54)" class="prop">id</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 55)" onmouseover="showTip(event, 'fs35', 55)" class="fn">ident</span><span class="pn">)</span><span class="pn">)</span> <span class="k">-&gt;</span>
      <span class="k">let</span> <span onmouseout="hideTip(event, 'fs36', 56)" onmouseover="showTip(event, 'fs36', 56)" class="fn">names</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs37', 57)" onmouseover="showTip(event, 'fs37', 57)" class="m">String</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs38', 58)" onmouseover="showTip(event, 'fs38', 58)" class="id">concat</span> <span class="s">&quot;.&quot;</span> <span class="pn">[</span> <span class="k">for</span> <span onmouseout="hideTip(event, 'fs39', 59)" onmouseover="showTip(event, 'fs39', 59)" class="fn">i</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs35', 60)" onmouseover="showTip(event, 'fs35', 60)" class="fn">ident</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs39', 61)" onmouseover="showTip(event, 'fs39', 61)" class="fn">i</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs31', 62)" onmouseover="showTip(event, 'fs31', 62)" class="id">idText</span> <span class="pn">]</span>
      <span onmouseout="hideTip(event, 'fs27', 63)" onmouseover="showTip(event, 'fs27', 63)" class="fn">printfn</span> <span class="s">&quot;  .. identifier: </span><span class="pf">%s</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs36', 64)" onmouseover="showTip(event, 'fs36', 64)" class="fn">names</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs40', 65)" onmouseover="showTip(event, 'fs40', 65)" class="fn">pat</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs27', 66)" onmouseover="showTip(event, 'fs27', 66)" class="fn">printfn</span> <span class="s">&quot;  .. other pattern: </span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs40', 67)" onmouseover="showTip(event, 'fs40', 67)" class="fn">pat</span>
</code></pre>
<p>The function is recursive (for nested patterns such as <code>(foo, _) as bar</code>), but it does not
call any of the functions defined later (because patterns cannot contain other syntactical
elements).</p>
<p>The next function iterates over expressions - this is where most of the work would be and
there are around 20 cases to cover (type <code>SynExpr.</code> and you'll get completion with other
options). In the following, we only show how to handle <code>if .. then ..</code> and <code>let .. = ...</code>:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Walk over an expression - if expression contains two or three </span>
<span class="c">/// sub-expressions (two if the &#39;else&#39; branch is missing), let expression</span>
<span class="c">/// contains pattern and two sub-expressions</span>
<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs41', 68)" onmouseover="showTip(event, 'fs41', 68)" class="fn">visitExpression</span> <span onmouseout="hideTip(event, 'fs42', 69)" onmouseover="showTip(event, 'fs42', 69)" class="fn">e</span> <span class="o">=</span> 
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs42', 70)" onmouseover="showTip(event, 'fs42', 70)" class="fn">e</span> <span class="k">with</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs43', 71)" onmouseover="showTip(event, 'fs43', 71)" class="rt">SynExpr</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 72)" onmouseover="showTip(event, 'fs44', 72)" class="id">IfThenElse</span><span class="pn">(</span><span class="prop">ifExpr</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs45', 73)" onmouseover="showTip(event, 'fs45', 73)" class="fn">cond</span><span class="pn">;</span> <span class="prop">thenExpr</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs46', 74)" onmouseover="showTip(event, 'fs46', 74)" class="fn">trueBranch</span><span class="pn">;</span> <span class="prop">elseExpr</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs47', 75)" onmouseover="showTip(event, 'fs47', 75)" class="fn">falseBranchOpt</span><span class="pn">)</span> <span class="k">-&gt;</span>
      <span class="c">// Visit all sub-expressions</span>
      <span onmouseout="hideTip(event, 'fs27', 76)" onmouseover="showTip(event, 'fs27', 76)" class="fn">printfn</span> <span class="s">&quot;Conditional:&quot;</span>
      <span onmouseout="hideTip(event, 'fs41', 77)" onmouseover="showTip(event, 'fs41', 77)" class="fn">visitExpression</span> <span onmouseout="hideTip(event, 'fs45', 78)" onmouseover="showTip(event, 'fs45', 78)" class="fn">cond</span>
      <span onmouseout="hideTip(event, 'fs41', 79)" onmouseover="showTip(event, 'fs41', 79)" class="fn">visitExpression</span> <span onmouseout="hideTip(event, 'fs46', 80)" onmouseover="showTip(event, 'fs46', 80)" class="fn">trueBranch</span>
      <span onmouseout="hideTip(event, 'fs47', 81)" onmouseover="showTip(event, 'fs47', 81)" class="fn">falseBranchOpt</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs48', 82)" onmouseover="showTip(event, 'fs48', 82)" class="m">Option</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs49', 83)" onmouseover="showTip(event, 'fs49', 83)" class="id">iter</span> <span onmouseout="hideTip(event, 'fs41', 84)" onmouseover="showTip(event, 'fs41', 84)" class="fn">visitExpression</span> 

  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs43', 85)" onmouseover="showTip(event, 'fs43', 85)" class="rt">SynExpr</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs50', 86)" onmouseover="showTip(event, 'fs50', 86)" class="id">LetOrUse</span><span class="pn">(</span><span class="id">_</span><span class="pn">,</span> <span class="id">_</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs51', 87)" onmouseover="showTip(event, 'fs51', 87)" class="fn">bindings</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs52', 88)" onmouseover="showTip(event, 'fs52', 88)" class="fn">body</span><span class="pn">,</span> <span class="id">_</span><span class="pn">,</span> <span class="id">_</span><span class="pn">)</span> <span class="k">-&gt;</span>
      <span class="c">// Visit bindings (there may be multiple </span>
      <span class="c">// for &#39;let .. = .. and .. = .. in ...&#39;</span>
      <span onmouseout="hideTip(event, 'fs27', 89)" onmouseover="showTip(event, 'fs27', 89)" class="fn">printfn</span> <span class="s">&quot;LetOrUse with the following bindings:&quot;</span>
      <span class="k">for</span> <span class="id">binding</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs51', 90)" onmouseover="showTip(event, 'fs51', 90)" class="fn">bindings</span> <span class="k">do</span>
        <span class="k">let</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs53', 91)" onmouseover="showTip(event, 'fs53', 91)" class="id">SynBinding</span><span class="pn">(</span><span class="id">headPat</span> <span class="o">=</span> <span class="id">headPat</span><span class="pn">;</span> <span class="id">expr</span> <span class="o">=</span> <span class="id">init</span><span class="pn">)</span><span class="pn">)</span> <span class="o">=</span> <span class="id">binding</span>
        <span onmouseout="hideTip(event, 'fs24', 92)" onmouseover="showTip(event, 'fs24', 92)" class="id">visitPattern</span> <span class="id">headPat</span>
        <span onmouseout="hideTip(event, 'fs41', 93)" onmouseover="showTip(event, 'fs41', 93)" class="id">visitExpression</span> <span class="id">init</span>
      <span class="c">// Visit the body expression</span>
      <span onmouseout="hideTip(event, 'fs27', 94)" onmouseover="showTip(event, 'fs27', 94)" class="fn">printfn</span> <span class="s">&quot;And the following body:&quot;</span>
      <span onmouseout="hideTip(event, 'fs41', 95)" onmouseover="showTip(event, 'fs41', 95)" class="fn">visitExpression</span> <span onmouseout="hideTip(event, 'fs52', 96)" onmouseover="showTip(event, 'fs52', 96)" class="fn">body</span>
  <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs54', 97)" onmouseover="showTip(event, 'fs54', 97)" class="fn">expr</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs27', 98)" onmouseover="showTip(event, 'fs27', 98)" class="fn">printfn</span> <span class="s">&quot; - not supported expression: </span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs54', 99)" onmouseover="showTip(event, 'fs54', 99)" class="fn">expr</span>
</code></pre>
<p>The <code>visitExpression</code> function will be called from a function that visits all top-level
declarations inside a module. In this tutorial, we ignore types and members, but that would
be another source of calls to <code>visitExpression</code>.</p>
<h3><a name="Walking-over-declarations" class="anchor" href="#Walking-over-declarations">Walking over declarations</a></h3>
<p>As mentioned earlier, the AST of a file contains a number of module or namespace declarations
(top-level node) that contain declarations inside a module (let bindings or types) or inside
a namespace (just types). The following function walks over declarations - we ignore types,
nested modules and all other elements and look only at top-level <code>let</code> bindings (values and
functions):</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Walk over a list of declarations in a module. This is anything</span>
<span class="c">/// that you can write as a top-level inside module (let bindings,</span>
<span class="c">/// nested modules, type declarations etc.)</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs55', 100)" onmouseover="showTip(event, 'fs55', 100)" class="fn">visitDeclarations</span> <span onmouseout="hideTip(event, 'fs56', 101)" onmouseover="showTip(event, 'fs56', 101)" class="fn">decls</span> <span class="o">=</span> 
  <span class="k">for</span> <span onmouseout="hideTip(event, 'fs57', 102)" onmouseover="showTip(event, 'fs57', 102)" class="fn">declaration</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs56', 103)" onmouseover="showTip(event, 'fs56', 103)" class="fn">decls</span> <span class="k">do</span>
    <span class="k">match</span> <span onmouseout="hideTip(event, 'fs57', 104)" onmouseover="showTip(event, 'fs57', 104)" class="fn">declaration</span> <span class="k">with</span>
    <span class="pn">|</span> <span onmouseout="hideTip(event, 'fs58', 105)" onmouseover="showTip(event, 'fs58', 105)" class="rt">SynModuleDecl</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs59', 106)" onmouseover="showTip(event, 'fs59', 106)" class="id">Let</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs60', 107)" onmouseover="showTip(event, 'fs60', 107)" class="fn">isRec</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs61', 108)" onmouseover="showTip(event, 'fs61', 108)" class="fn">bindings</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs62', 109)" onmouseover="showTip(event, 'fs62', 109)" class="fn">range</span><span class="pn">)</span> <span class="k">-&gt;</span>
        <span class="c">// Let binding as a declaration is similar to let binding</span>
        <span class="c">// as an expression (in visitExpression), but has no body</span>
        <span class="k">for</span> <span onmouseout="hideTip(event, 'fs63', 110)" onmouseover="showTip(event, 'fs63', 110)" class="fn">binding</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs61', 111)" onmouseover="showTip(event, 'fs61', 111)" class="fn">bindings</span> <span class="k">do</span>
          <span class="k">let</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs53', 112)" onmouseover="showTip(event, 'fs53', 112)" class="uc">SynBinding</span><span class="pn">(</span><span class="prop">headPat</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs40', 113)" onmouseover="showTip(event, 'fs40', 113)" class="fn">pat</span><span class="pn">;</span> <span class="prop">expr</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs64', 114)" onmouseover="showTip(event, 'fs64', 114)" class="fn">body</span><span class="pn">)</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs63', 115)" onmouseover="showTip(event, 'fs63', 115)" class="fn">binding</span>
          <span onmouseout="hideTip(event, 'fs24', 116)" onmouseover="showTip(event, 'fs24', 116)" class="fn">visitPattern</span> <span onmouseout="hideTip(event, 'fs40', 117)" onmouseover="showTip(event, 'fs40', 117)" class="fn">pat</span> 
          <span onmouseout="hideTip(event, 'fs41', 118)" onmouseover="showTip(event, 'fs41', 118)" class="fn">visitExpression</span> <span onmouseout="hideTip(event, 'fs64', 119)" onmouseover="showTip(event, 'fs64', 119)" class="fn">body</span>         
    <span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs27', 120)" onmouseover="showTip(event, 'fs27', 120)" class="fn">printfn</span> <span class="s">&quot; - not supported declaration: </span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs57', 121)" onmouseover="showTip(event, 'fs57', 121)" class="fn">declaration</span>
</code></pre>
<p>The <code>visitDeclarations</code> function will be called from a function that walks over a
sequence of module or namespace declarations. This corresponds, for example, to a file
with multiple <code>namespace Foo</code> declarations:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">/// Walk over all module or namespace declarations </span>
<span class="c">/// (basically &#39;module Foo =&#39; or &#39;namespace Foo.Bar&#39;)</span>
<span class="c">/// Note that there is one implicitly, even if the file</span>
<span class="c">/// does not explicitly define it..</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 122)" onmouseover="showTip(event, 'fs65', 122)" class="fn">visitModulesAndNamespaces</span> <span onmouseout="hideTip(event, 'fs66', 123)" onmouseover="showTip(event, 'fs66', 123)" class="fn">modulesOrNss</span> <span class="o">=</span>
  <span class="k">for</span> <span onmouseout="hideTip(event, 'fs67', 124)" onmouseover="showTip(event, 'fs67', 124)" class="fn">moduleOrNs</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs66', 125)" onmouseover="showTip(event, 'fs66', 125)" class="fn">modulesOrNss</span> <span class="k">do</span>
    <span class="k">let</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs68', 126)" onmouseover="showTip(event, 'fs68', 126)" class="uc">SynModuleOrNamespace</span><span class="pn">(</span><span class="prop">longId</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs69', 127)" onmouseover="showTip(event, 'fs69', 127)" class="fn">lid</span><span class="pn">;</span> <span class="prop">decls</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs70', 128)" onmouseover="showTip(event, 'fs70', 128)" class="fn">decls</span><span class="pn">)</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs67', 129)" onmouseover="showTip(event, 'fs67', 129)" class="fn">moduleOrNs</span>
    <span onmouseout="hideTip(event, 'fs27', 130)" onmouseover="showTip(event, 'fs27', 130)" class="fn">printfn</span> <span class="s">&quot;Namespace or module: </span><span class="pf">%A</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs69', 131)" onmouseover="showTip(event, 'fs69', 131)" class="fn">lid</span>
    <span onmouseout="hideTip(event, 'fs55', 132)" onmouseover="showTip(event, 'fs55', 132)" class="fn">visitDeclarations</span> <span onmouseout="hideTip(event, 'fs70', 133)" onmouseover="showTip(event, 'fs70', 133)" class="fn">decls</span>
</code></pre>
<p>Now that we have functions that walk over the elements of the AST (starting from declaration,
down to expressions and patterns), we can get AST of a sample input and run the above function.</p>
<h2><a name="Putting-things-together" class="anchor" href="#Putting-things-together">Putting things together</a></h2>
<p>As already discussed, the <code>getUntypedTree</code> function uses <code>FSharpChecker</code> to run the first
phase (parsing) on the AST and get back the tree. The function requires F# source code together
with location of the file. The location does not have to exist (it is used only for location
information) and it can be in both Unix and Windows formats:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Sample input for the compiler service</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs71', 134)" onmouseover="showTip(event, 'fs71', 134)" class="id">input</span> <span class="o">=</span>
  <span class="s">&quot;&quot;&quot;</span>
<span class="s">  let foo() = </span>
<span class="s">    let msg = &quot;Hello world&quot;</span>
<span class="s">    if true then </span>
<span class="s">      printfn &quot;%s&quot; msg</span>
<span class="s">  &quot;&quot;&quot;</span>

<span class="c">// File name in Unix format</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs10', 135)" onmouseover="showTip(event, 'fs10', 135)" class="id">file</span> <span class="o">=</span> <span class="s">&quot;/home/user/Test.fsx&quot;</span>

<span class="c">// Get the AST of sample F# code</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs72', 136)" onmouseover="showTip(event, 'fs72', 136)" class="id">tree</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs73', 137)" onmouseover="showTip(event, 'fs73', 137)" class="fn">getUntypedTree</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs10', 138)" onmouseover="showTip(event, 'fs10', 138)" class="id">file</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs74', 139)" onmouseover="showTip(event, 'fs74', 139)" class="m">SourceText</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs75', 140)" onmouseover="showTip(event, 'fs75', 140)" class="id">ofString</span> <span onmouseout="hideTip(event, 'fs71', 141)" onmouseover="showTip(event, 'fs71', 141)" class="id">input</span><span class="pn">)</span>
</code></pre>
<p>When you run the code in F# interactive, you can enter <code>tree;;</code> in the interactive console and
see a pretty printed representation of the data structure - the tree contains a lot of information,
so this is not particularly readable, but it gives you a good idea about how the tree looks.</p>
<p>The returned <code>tree</code> value is again a discriminated union that can be two different cases - one case
is <code>ParsedInput.SigFile</code> which represents F# signature file (<code>*.fsi</code>) and the other one is
<code>ParsedInput.ImplFile</code> representing regular source code (<code>*.fsx</code> or <code>*.fs</code>). The implementation
file contains a sequence of modules or namespaces that we can pass to the function implemented
in the previous step:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Extract implementation file details</span>
<span class="k">match</span> <span onmouseout="hideTip(event, 'fs72', 142)" onmouseover="showTip(event, 'fs72', 142)" class="id">tree</span> <span class="k">with</span>
<span class="pn">|</span> <span onmouseout="hideTip(event, 'fs76', 143)" onmouseover="showTip(event, 'fs76', 143)" class="rt">ParsedInput</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs77', 144)" onmouseover="showTip(event, 'fs77', 144)" class="id">ImplFile</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs78', 145)" onmouseover="showTip(event, 'fs78', 145)" class="fn">implFile</span><span class="pn">)</span> <span class="k">-&gt;</span>
    <span class="c">// Extract declarations and walk over them</span>
    <span class="k">let</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs79', 146)" onmouseover="showTip(event, 'fs79', 146)" class="uc">ParsedImplFileInput</span><span class="pn">(</span><span class="prop">contents</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs80', 147)" onmouseover="showTip(event, 'fs80', 147)" class="fn">modules</span><span class="pn">)</span><span class="pn">)</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs78', 148)" onmouseover="showTip(event, 'fs78', 148)" class="fn">implFile</span>
    <span onmouseout="hideTip(event, 'fs65', 149)" onmouseover="showTip(event, 'fs65', 149)" class="fn">visitModulesAndNamespaces</span> <span onmouseout="hideTip(event, 'fs80', 150)" onmouseover="showTip(event, 'fs80', 150)" class="fn">modules</span>
<span class="pn">|</span> <span class="id">_</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs81', 151)" onmouseover="showTip(event, 'fs81', 151)" class="fn">failwith</span> <span class="s">&quot;F# Interface file (*.fsi) not supported.&quot;</span>
</code></pre>
<h2><a name="Summary" class="anchor" href="#Summary">Summary</a></h2>
<p>In this tutorial, we looked at the basics of working with the untyped abstract syntax tree. This is a
comprehensive topic, so it is not possible to explain everything in a single article. The
<a href="https://github.com/fsprojects/fantomas">Fantomas project</a> is a good example of a tool based on the untyped
AST that can help you understand more. In practice, it is also useful to combine the information here
with some information you can obtain from the <a href="editor.html">editor services</a> discussed in the next
tutorial.</p>

        <div class="fsdocs-tip" id="fs1">namespace System</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs3">namespace FSharp.Compiler</div>
<div class="fsdocs-tip" id="fs4">namespace FSharp.Compiler.CodeAnalysis</div>
<div class="fsdocs-tip" id="fs5">namespace FSharp.Compiler.Text</div>
<div class="fsdocs-tip" id="fs6">val checker: FSharpChecker</div>
<div class="fsdocs-tip" id="fs7">type FSharpChecker =
  member CheckFileInProject: parseResults: FSharpParseFileResults * fileName: string * fileVersion: int * sourceText: ISourceText * options: FSharpProjectOptions * ?userOpName: string -&gt; Async&lt;FSharpCheckFileAnswer&gt;
  member ClearCache: options: FSharpProjectOptions seq * ?userOpName: string -&gt; unit + 1 overload
  member ClearLanguageServiceRootCachesAndCollectAndFinalizeAllTransients: unit -&gt; unit
  member Compile: argv: string array * ?userOpName: string -&gt; Async&lt;FSharpDiagnostic array * exn option&gt;
  member FindBackgroundReferencesInFile: fileName: string * options: FSharpProjectOptions * symbol: FSharpSymbol * ?canInvalidateProject: bool * [&lt;Experimental (&quot;This FCS API is experimental and subject to change.&quot;)&gt;] ?fastCheck: bool * ?userOpName: string -&gt; Async&lt;range seq&gt; + 1 overload
  member GetBackgroundCheckResultsForFileInProject: fileName: string * options: FSharpProjectOptions * ?userOpName: string -&gt; Async&lt;FSharpParseFileResults * FSharpCheckFileResults&gt;
  member GetBackgroundParseResultsForFileInProject: fileName: string * options: FSharpProjectOptions * ?userOpName: string -&gt; Async&lt;FSharpParseFileResults&gt;
  member GetBackgroundSemanticClassificationForFile: fileName: string * options: FSharpProjectOptions * ?userOpName: string -&gt; Async&lt;SemanticClassificationView option&gt; + 1 overload
  member GetParsingOptionsFromCommandLineArgs: sourceFiles: string list * argv: string list * ?isInteractive: bool * ?isEditing: bool -&gt; FSharpParsingOptions * FSharpDiagnostic list + 1 overload
  member GetParsingOptionsFromProjectOptions: options: FSharpProjectOptions -&gt; FSharpParsingOptions * FSharpDiagnostic list
  ...<br /><em>&lt;summary&gt;
 Used to parse and check F# source code.
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs8">static member FSharpChecker.Create: ?projectCacheSize: int * ?keepAssemblyContents: bool * ?keepAllBackgroundResolutions: bool * ?legacyReferenceResolver: LegacyReferenceResolver * ?tryGetMetadataSnapshot: FSharp.Compiler.AbstractIL.ILBinaryReader.ILReaderTryGetMetadataSnapshot * ?suggestNamesForErrors: bool * ?keepAllBackgroundSymbolUses: bool * ?enableBackgroundItemKeyStoreAndSemanticClassification: bool * ?enablePartialTypeChecking: bool * ?parallelReferenceResolution: bool * ?captureIdentifiersWhenParsing: bool * [&lt;Experimental (&quot;This parameter is experimental and likely to be removed in the future.&quot;)&gt;] ?documentSource: DocumentSource * [&lt;Experimental (&quot;This parameter is experimental and likely to be removed in the future.&quot;)&gt;] ?useTransparentCompiler: bool * [&lt;Experimental (&quot;This parameter is experimental and likely to be removed in the future.&quot;)&gt;] ?transparentCompilerCacheSizes: TransparentCompiler.CacheSizes -&gt; FSharpChecker</div>
<div class="fsdocs-tip" id="fs9">val getUntypedTree: file: string * input: ISourceText -&gt; FSharp.Compiler.Syntax.ParsedInput<br /><em>&#160;Get untyped tree for a specified input</em></div>
<div class="fsdocs-tip" id="fs10">val file: string</div>
<div class="fsdocs-tip" id="fs11">val input: ISourceText</div>
<div class="fsdocs-tip" id="fs12">val projOptions: FSharpProjectOptions</div>
<div class="fsdocs-tip" id="fs13">val diagnostics: FSharp.Compiler.Diagnostics.FSharpDiagnostic list</div>
<div class="fsdocs-tip" id="fs14">member FSharpChecker.GetProjectOptionsFromScript: fileName: string * source: ISourceText * ?caret: Position * ?previewEnabled: bool * ?loadedTimeStamp: DateTime * ?otherFlags: string array * ?useFsiAuxLib: bool * ?useSdkRefs: bool * ?assumeDotNetFramework: bool * ?sdkDirOverride: string * ?optionsStamp: int64 * ?userOpName: string -&gt; Async&lt;FSharpProjectOptions * FSharp.Compiler.Diagnostics.FSharpDiagnostic list&gt;</div>
<div class="fsdocs-tip" id="fs15">Multiple items<br />type Async =
  static member AsBeginEnd: computation: (&#39;Arg -&gt; Async&lt;&#39;T&gt;) -&gt; (&#39;Arg * AsyncCallback * objnull -&gt; IAsyncResult) * (IAsyncResult -&gt; &#39;T) * (IAsyncResult -&gt; unit)
  static member AwaitEvent: event: IEvent&lt;&#39;Del,&#39;T&gt; * ?cancelAction: (unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; (requires delegate and &#39;Del :&gt; Delegate)
  static member AwaitIAsyncResult: iar: IAsyncResult * ?millisecondsTimeout: int -&gt; Async&lt;bool&gt;
  static member AwaitTask: task: Task&lt;&#39;T&gt; -&gt; Async&lt;&#39;T&gt; + 1 overload
  static member AwaitWaitHandle: waitHandle: WaitHandle * ?millisecondsTimeout: int -&gt; Async&lt;bool&gt;
  static member CancelDefaultToken: unit -&gt; unit
  static member Catch: computation: Async&lt;&#39;T&gt; -&gt; Async&lt;Choice&lt;&#39;T,exn&gt;&gt;
  static member Choice: computations: Async&lt;&#39;T option&gt; seq -&gt; Async&lt;&#39;T option&gt;
  static member FromBeginEnd: beginAction: (AsyncCallback * objnull -&gt; IAsyncResult) * endAction: (IAsyncResult -&gt; &#39;T) * ?cancelAction: (unit -&gt; unit) -&gt; Async&lt;&#39;T&gt; + 3 overloads
  static member FromContinuations: callback: ((&#39;T -&gt; unit) * (exn -&gt; unit) * (OperationCanceledException -&gt; unit) -&gt; unit) -&gt; Async&lt;&#39;T&gt;
  ...<br /><br />--------------------<br />type Async&lt;&#39;T&gt;</div>
<div class="fsdocs-tip" id="fs16">static member Async.RunSynchronously: computation: Async&lt;&#39;T&gt; * ?timeout: int * ?cancellationToken: Threading.CancellationToken -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs17">val parsingOptions: FSharpParsingOptions</div>
<div class="fsdocs-tip" id="fs18">val _errors: FSharp.Compiler.Diagnostics.FSharpDiagnostic list</div>
<div class="fsdocs-tip" id="fs19">member FSharpChecker.GetParsingOptionsFromProjectOptions: options: FSharpProjectOptions -&gt; FSharpParsingOptions * FSharp.Compiler.Diagnostics.FSharpDiagnostic list</div>
<div class="fsdocs-tip" id="fs20">val parseFileResults: FSharpParseFileResults</div>
<div class="fsdocs-tip" id="fs21">member FSharpChecker.ParseFile: fileName: string * projectSnapshot: FSharpProjectSnapshot * ?userOpName: string -&gt; Async&lt;FSharpParseFileResults&gt;<br />member FSharpChecker.ParseFile: fileName: string * sourceText: ISourceText * options: FSharpParsingOptions * ?cache: bool * ?userOpName: string -&gt; Async&lt;FSharpParseFileResults&gt;</div>
<div class="fsdocs-tip" id="fs22">property FSharpParseFileResults.ParseTree: FSharp.Compiler.Syntax.ParsedInput with get<br /><em>&lt;summary&gt;
 The syntax tree resulting from the parse
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs23">namespace FSharp.Compiler.Syntax</div>
<div class="fsdocs-tip" id="fs24">val visitPattern: _arg1: SynPat -&gt; unit<br /><em>&#160;Walk over a pattern - this is for example used in <br />&#160;let &lt;pat&gt; = &lt;expr&gt; or in the &#39;match&#39; expression</em></div>
<div class="fsdocs-tip" id="fs25">Multiple items<br />module SynPat

from FSharp.Compiler.Syntax<br /><br />--------------------<br />type SynPat =
  | Const of constant: SynConst * range: range
  | Wild of range: range
  | Named of ident: SynIdent * isThisVal: bool * accessibility: SynAccess option * range: range
  | Typed of pat: SynPat * targetType: SynType * range: range
  | Attrib of pat: SynPat * attributes: SynAttributes * range: range
  | Or of lhsPat: SynPat * rhsPat: SynPat * range: range * trivia: SynPatOrTrivia
  | ListCons of lhsPat: SynPat * rhsPat: SynPat * range: range * trivia: SynPatListConsTrivia
  | Ands of pats: SynPat list * range: range
  | As of lhsPat: SynPat * rhsPat: SynPat * range: range
  | LongIdent of longDotId: SynLongIdent * extraId: Ident option * typarDecls: SynValTyparDecls option * argPats: SynArgPats * accessibility: SynAccess option * range: range
  ...
  member Range: range with get<br /><em>&lt;summary&gt;
 Represents a syntax tree for an F# pattern
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs26">union case SynPat.Wild: range: range -&gt; SynPat<br /><em>&lt;summary&gt;
 A wildcard &#39;_&#39; in a pattern
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs27">val printfn: format: Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs28">union case SynPat.Named: ident: SynIdent * isThisVal: bool * accessibility: SynAccess option * range: range -&gt; SynPat<br /><em>&lt;summary&gt;
 A name pattern &#39;ident&#39;
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs29">Multiple items<br />union case SynIdent.SynIdent: ident: Ident * trivia: FSharp.Compiler.SyntaxTrivia.IdentTrivia option -&gt; SynIdent<br /><br />--------------------<br />type SynIdent =
  | SynIdent of ident: Ident * trivia: IdentTrivia option
  member Range: range with get<br /><em>&lt;summary&gt;
 Represents an identifier with potentially additional trivia information.
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs30">val name: Ident</div>
<div class="fsdocs-tip" id="fs31">property Ident.idText: string with get</div>
<div class="fsdocs-tip" id="fs32">union case SynPat.LongIdent: longDotId: SynLongIdent * extraId: Ident option * typarDecls: SynValTyparDecls option * argPats: SynArgPats * accessibility: SynAccess option * range: range -&gt; SynPat<br /><em>&lt;summary&gt;
 A long identifier pattern possibly with argument patterns
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs33">Multiple items<br />union case SynLongIdent.SynLongIdent: id: LongIdent * dotRanges: range list * trivia: FSharp.Compiler.SyntaxTrivia.IdentTrivia option list -&gt; SynLongIdent<br /><br />--------------------<br />type SynLongIdent =
  | SynLongIdent of id: LongIdent * dotRanges: range list * trivia: IdentTrivia option list
  member Dots: range list with get
  member IdentsWithTrivia: SynIdent list with get
  member LongIdent: LongIdent with get
  member Range: range with get
  member RangeWithoutAnyExtraDot: range with get
  member ThereIsAnExtraDotAtTheEnd: bool with get
  member Trivia: IdentTrivia list with get<br /><em>&lt;summary&gt;
 Represents a long identifier with possible &#39;.&#39; at end.

 Typically dotRanges.Length = lid.Length-1, but they may be same if (incomplete) code ends in a dot, e.g. &quot;Foo.Bar.&quot;
 The dots mostly matter for parsing, and are typically ignored by the typechecker, but
 if dotRanges.Length = lid.Length, then the parser must have reported an error, so the typechecker is allowed
 more freedom about typechecking these expressions.
 LongIdent can be empty list - it is used to denote that name of some AST element is absent (i.e. empty type name in inherit)
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs34">val id: x: &#39;T -&gt; &#39;T</div>
<div class="fsdocs-tip" id="fs35">val ident: LongIdent</div>
<div class="fsdocs-tip" id="fs36">val names: string</div>
<div class="fsdocs-tip" id="fs37">Multiple items<br />type String =
  interface IEnumerable&lt;char&gt;
  interface IEnumerable
  interface ICloneable
  interface IComparable
  interface IComparable&lt;string&gt;
  interface IConvertible
  interface IEquatable&lt;string&gt;
  interface IParsable&lt;string&gt;
  interface ISpanParsable&lt;string&gt;
  new: value: nativeptr&lt;char&gt; -&gt; unit + 8 overloads
  ...<br /><em>&lt;summary&gt;Represents text as a sequence of UTF-16 code units.&lt;/summary&gt;</em><br /><br />--------------------<br />String(value: nativeptr&lt;char&gt;) : String<br />String(value: char array) : String<br />String(value: ReadOnlySpan&lt;char&gt;) : String<br />String(value: nativeptr&lt;sbyte&gt;) : String<br />String(c: char, count: int) : String<br />String(value: nativeptr&lt;char&gt;, startIndex: int, length: int) : String<br />String(value: char array, startIndex: int, length: int) : String<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int) : String<br />String(value: nativeptr&lt;sbyte&gt;, startIndex: int, length: int, enc: Text.Encoding) : String</div>
<div class="fsdocs-tip" id="fs38">val concat: sep: string -&gt; strings: string seq -&gt; string</div>
<div class="fsdocs-tip" id="fs39">val i: Ident</div>
<div class="fsdocs-tip" id="fs40">val pat: SynPat</div>
<div class="fsdocs-tip" id="fs41">val visitExpression: e: SynExpr -&gt; unit<br /><em>&#160;Walk over an expression - if expression contains two or three <br />&#160;sub-expressions (two if the &#39;else&#39; branch is missing), let expression<br />&#160;contains pattern and two sub-expressions</em></div>
<div class="fsdocs-tip" id="fs42">val e: SynExpr</div>
<div class="fsdocs-tip" id="fs43">Multiple items<br />module SynExpr

from FSharp.Compiler.Syntax<br /><br />--------------------<br />type SynExpr =
  | Paren of expr: SynExpr * leftParenRange: range * rightParenRange: range option * range: range
  | Quote of operator: SynExpr * isRaw: bool * quotedExpr: SynExpr * isFromQueryExpression: bool * range: range
  | Const of constant: SynConst * range: range
  | Typed of expr: SynExpr * targetType: SynType * range: range
  | Tuple of isStruct: bool * exprs: SynExpr list * commaRanges: range list * range: range
  | AnonRecd of isStruct: bool * copyInfo: (SynExpr * BlockSeparator) option * recordFields: (SynLongIdent * range option * SynExpr) list * range: range * trivia: SynExprAnonRecdTrivia
  | ArrayOrList of isArray: bool * exprs: SynExpr list * range: range
  | Record of baseInfo: (SynType * SynExpr * range * BlockSeparator option * range) option * copyInfo: (SynExpr * BlockSeparator) option * recordFields: SynExprRecordField list * range: range
  | New of isProtected: bool * targetType: SynType * expr: SynExpr * range: range
  | ObjExpr of objType: SynType * argOptions: (SynExpr * Ident option) option * withKeyword: range option * bindings: SynBinding list * members: SynMemberDefns * extraImpls: SynInterfaceImpl list * newExprRange: range * range: range
  ...
  member IsArbExprAndThusAlreadyReportedError: bool with get
  member Range: range with get
  member RangeOfFirstPortion: range with get
  member RangeWithoutAnyExtraDot: range with get<br /><em>&lt;summary&gt;
 Represents a syntax tree for F# expressions
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs44">union case SynExpr.IfThenElse: ifExpr: SynExpr * thenExpr: SynExpr * elseExpr: SynExpr option * spIfToThen: DebugPointAtBinding * isFromErrorRecovery: bool * range: range * trivia: FSharp.Compiler.SyntaxTrivia.SynExprIfThenElseTrivia -&gt; SynExpr<br /><em>&lt;summary&gt;
 F# syntax: if expr then expr
 F# syntax: if expr then expr else expr
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs45">val cond: SynExpr</div>
<div class="fsdocs-tip" id="fs46">val trueBranch: SynExpr</div>
<div class="fsdocs-tip" id="fs47">val falseBranchOpt: SynExpr option</div>
<div class="fsdocs-tip" id="fs48">module Option

from Microsoft.FSharp.Core</div>
<div class="fsdocs-tip" id="fs49">val iter: action: (&#39;T -&gt; unit) -&gt; option: &#39;T option -&gt; unit</div>
<div class="fsdocs-tip" id="fs50">union case SynExpr.LetOrUse: isRecursive: bool * isUse: bool * isFromSource: bool * isBang: bool * bindings: SynBinding list * body: SynExpr * range: range * trivia: FSharp.Compiler.SyntaxTrivia.SynExprLetOrUseTrivia -&gt; SynExpr<br /><em>&lt;summary&gt;
 F# syntax: let pat = expr in expr
 F# syntax: let f pat1 .. patN = expr in expr
 F# syntax: let rec f pat1 .. patN = expr in expr
 F# syntax: use pat = expr in expr
 F# syntax: let! pat = expr in expr
 F# syntax: use! pat = expr in expr
 F# syntax: let! pat = expr and! ... and! ... and! pat = expr in expr
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs51">val bindings: bool</div>
<div class="fsdocs-tip" id="fs52">val body: bool</div>
<div class="fsdocs-tip" id="fs53">Multiple items<br />union case SynBinding.SynBinding: accessibility: SynAccess option * kind: SynBindingKind * isInline: bool * isMutable: bool * attributes: SynAttributes * xmlDoc: FSharp.Compiler.Xml.PreXmlDoc * valData: SynValData * headPat: SynPat * returnInfo: SynBindingReturnInfo option * expr: SynExpr * range: range * debugPoint: DebugPointAtBinding * trivia: FSharp.Compiler.SyntaxTrivia.SynBindingTrivia -&gt; SynBinding<br /><br />--------------------<br />type SynBinding =
  | SynBinding of accessibility: SynAccess option * kind: SynBindingKind * isInline: bool * isMutable: bool * attributes: SynAttributes * xmlDoc: PreXmlDoc * valData: SynValData * headPat: SynPat * returnInfo: SynBindingReturnInfo option * expr: SynExpr * range: range * debugPoint: DebugPointAtBinding * trivia: SynBindingTrivia
  member RangeOfBindingWithRhs: range with get
  member RangeOfBindingWithoutRhs: range with get
  member RangeOfHeadPattern: range with get
  member Trivia: SynBindingTrivia with get<br /><em>&lt;summary&gt;
 Represents a binding for a &#39;let&#39; or &#39;member&#39; declaration
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs54">val expr: SynExpr</div>
<div class="fsdocs-tip" id="fs55">val visitDeclarations: decls: SynModuleDecl seq -&gt; unit<br /><em>&#160;Walk over a list of declarations in a module. This is anything<br />&#160;that you can write as a top-level inside module (let bindings,<br />&#160;nested modules, type declarations etc.)</em></div>
<div class="fsdocs-tip" id="fs56">val decls: SynModuleDecl seq</div>
<div class="fsdocs-tip" id="fs57">val declaration: SynModuleDecl</div>
<div class="fsdocs-tip" id="fs58">type SynModuleDecl =
  | ModuleAbbrev of ident: Ident * longId: LongIdent * range: range
  | NestedModule of moduleInfo: SynComponentInfo * isRecursive: bool * decls: SynModuleDecl list * isContinuing: bool * range: range * trivia: SynModuleDeclNestedModuleTrivia
  | Let of isRecursive: bool * bindings: SynBinding list * range: range
  | Expr of expr: SynExpr * range: range
  | Types of typeDefns: SynTypeDefn list * range: range
  | Exception of exnDefn: SynExceptionDefn * range: range
  | Open of target: SynOpenDeclTarget * range: range
  | Attributes of attributes: SynAttributes * range: range
  | HashDirective of hashDirective: ParsedHashDirective * range: range
  | NamespaceFragment of fragment: SynModuleOrNamespace
  member Range: range with get<br /><em>&lt;summary&gt;
 Represents a definition within a module
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs59">union case SynModuleDecl.Let: isRecursive: bool * bindings: SynBinding list * range: range -&gt; SynModuleDecl<br /><em>&lt;summary&gt;
 A &#39;let&#39; definition within a module
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs60">val isRec: bool</div>
<div class="fsdocs-tip" id="fs61">val bindings: SynBinding list</div>
<div class="fsdocs-tip" id="fs62">Multiple items<br />val range: range<br /><br />--------------------<br />type range = Range<br /><em>&lt;summary&gt;
 Represents a range within a file
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs63">val binding: SynBinding</div>
<div class="fsdocs-tip" id="fs64">val body: SynExpr</div>
<div class="fsdocs-tip" id="fs65">val visitModulesAndNamespaces: modulesOrNss: SynModuleOrNamespace seq -&gt; unit<br /><em>&#160;Walk over all module or namespace declarations <br />&#160;(basically &#39;module Foo =&#39; or &#39;namespace Foo.Bar&#39;)<br />&#160;Note that there is one implicitly, even if the file<br />&#160;does not explicitly define it..</em></div>
<div class="fsdocs-tip" id="fs66">val modulesOrNss: SynModuleOrNamespace seq</div>
<div class="fsdocs-tip" id="fs67">val moduleOrNs: SynModuleOrNamespace</div>
<div class="fsdocs-tip" id="fs68">Multiple items<br />union case SynModuleOrNamespace.SynModuleOrNamespace: longId: LongIdent * isRecursive: bool * kind: SynModuleOrNamespaceKind * decls: SynModuleDecl list * xmlDoc: FSharp.Compiler.Xml.PreXmlDoc * attribs: SynAttributes * accessibility: SynAccess option * range: range * trivia: FSharp.Compiler.SyntaxTrivia.SynModuleOrNamespaceTrivia -&gt; SynModuleOrNamespace<br /><br />--------------------<br />type SynModuleOrNamespace =
  | SynModuleOrNamespace of longId: LongIdent * isRecursive: bool * kind: SynModuleOrNamespaceKind * decls: SynModuleDecl list * xmlDoc: PreXmlDoc * attribs: SynAttributes * accessibility: SynAccess option * range: range * trivia: SynModuleOrNamespaceTrivia
  member Range: range with get<br /><em>&lt;summary&gt;
 Represents the definition of a module or namespace
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs69">val lid: LongIdent</div>
<div class="fsdocs-tip" id="fs70">val decls: SynModuleDecl list</div>
<div class="fsdocs-tip" id="fs71">val input: string</div>
<div class="fsdocs-tip" id="fs72">val tree: ParsedInput</div>
<div class="fsdocs-tip" id="fs73">val getUntypedTree: file: string * input: ISourceText -&gt; ParsedInput<br /><em>&#160;Get untyped tree for a specified input</em></div>
<div class="fsdocs-tip" id="fs74">module SourceText

from FSharp.Compiler.Text<br /><em>&lt;summary&gt;
 Functions related to ISourceText objects
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs75">val ofString: string -&gt; ISourceText<br /><em>&lt;summary&gt;
 Creates an ISourceText object from the given string
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs76">Multiple items<br />module ParsedInput

from FSharp.Compiler.Syntax<br /><em>&lt;summary&gt;
 Holds operations for working with the
 untyped abstract syntax tree (&lt;see cref=&quot;T:FSharp.Compiler.Syntax.ParsedInput&quot; /&gt;).
 &lt;/summary&gt;</em><br /><br />--------------------<br />type ParsedInput =
  | ImplFile of ParsedImplFileInput
  | SigFile of ParsedSigFileInput
  member FileName: string with get
  member Identifiers: Set&lt;string&gt; with get
  member QualifiedName: QualifiedNameOfFile with get
  member Range: range with get<br /><em>&lt;summary&gt;
 Represents the syntax tree for a parsed implementation or signature file
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs77">union case ParsedInput.ImplFile: ParsedImplFileInput -&gt; ParsedInput<br /><em>&lt;summary&gt;
 A parsed implementation file
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs78">val implFile: ParsedImplFileInput</div>
<div class="fsdocs-tip" id="fs79">Multiple items<br />union case ParsedImplFileInput.ParsedImplFileInput: fileName: string * isScript: bool * qualifiedNameOfFile: QualifiedNameOfFile * hashDirectives: ParsedHashDirective list * contents: SynModuleOrNamespace list * flags: bool * bool * trivia: FSharp.Compiler.SyntaxTrivia.ParsedInputTrivia * identifiers: Set&lt;string&gt; -&gt; ParsedImplFileInput<br /><br />--------------------<br />type ParsedImplFileInput =
  | ParsedImplFileInput of fileName: string * isScript: bool * qualifiedNameOfFile: QualifiedNameOfFile * hashDirectives: ParsedHashDirective list * contents: SynModuleOrNamespace list * flags: bool * bool * trivia: ParsedInputTrivia * identifiers: Set&lt;string&gt;
  member Contents: SynModuleOrNamespace list with get
  member FileName: string with get
  member HashDirectives: ParsedHashDirective list with get
  member IsExe: bool with get
  member IsLastCompiland: bool with get
  member IsScript: bool with get
  member QualifiedName: QualifiedNameOfFile with get
  member Trivia: ParsedInputTrivia with get<br /><em>&lt;summary&gt;
 Represents the full syntax tree, file name and other parsing information for an implementation file
&lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs80">val modules: SynModuleOrNamespace list</div>
<div class="fsdocs-tip" id="fs81">val failwith: message: string -&gt; &#39;T</div>

    </div>
</main>
<aside id="fsdocs-page-menu">
    <p id="on-this-page">On this page</p>
    <ul>
  <li class="level-1">
    <a href="#Compiler-Services-Processing-SyntaxTree">
      Compiler Services: Processing SyntaxTree
    </a>
  </li>
  <li class="level-2">
    <a href="#Getting-the-SyntaxTree">
      Getting the SyntaxTree
    </a>
  </li>
  <li class="level-3">
    <a href="#Performing-untyped-parse">
      Performing untyped parse
    </a>
  </li>
  <li class="level-2">
    <a href="#Walking-over-the-AST">
      Walking over the AST
    </a>
  </li>
  <li class="level-3">
    <a href="#Walking-over-patterns-and-expressions">
      Walking over patterns and expressions
    </a>
  </li>
  <li class="level-3">
    <a href="#Walking-over-declarations">
      Walking over declarations
    </a>
  </li>
  <li class="level-2">
    <a href="#Putting-things-together">
      Putting things together
    </a>
  </li>
  <li class="level-2">
    <a href="#Summary">
      Summary
    </a>
  </li>
</ul>
</aside>
<dialog>
    <input type="search" placeholder="Search docs" />
    <div class="results">
        <ul></ul>
        <p class="empty">Type something to start searching.</p>
    </div>
</dialog>
<script type="module" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-tips.js"></script>
<script type="module" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-theme-toggle.js"></script>
<script type="module" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-details-toggle.js"></script>
<script type="module" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-theme.js"></script>
<script type="module" src="https://fsharp.github.io/fsharp-compiler-docs/content/fsdocs-search.js"></script>

</body>
</html>